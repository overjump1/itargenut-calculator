<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מחשבון ימי התרעננות</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.rtl.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/he.js"></script>
</head>

<body>
    <div class="container mt-5">
        <h1 class="mb-4 text-center">מחשבון ימי התרעננות</h1>
        <div class="row justify-content-center">
            <div class="col-lg-4 col-md-6 col-sm-8">
                <div class="card p-4 text-center">
                    <div class="mb-3">
                        <label for="startDate" class="form-label">תאריך תחילת שמ"פ</label>
                        <input type="text" class="form-control text-center" id="startDate" placeholder="dd/mm/yyyy">
                    </div>
                    <div class="mb-3">
                        <label for="endDate" class="form-label">תאריך סיום שמ"פ</label>
                        <input type="text" class="form-control text-center" id="endDate" placeholder="dd/mm/yyyy">
                    </div>
                    <button class="btn btn-primary w-100" onclick="calculateDays()">חשב ימי התרעננות</button>
                    <div class="mt-3">
                        <p id="result"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Initialize Flatpickr with dd/mm/yyyy format and allow manual input
        flatpickr("#startDate", {
            dateFormat: "d/m/Y",
            allowInput: true,
            locale: "he"
        });
        flatpickr("#endDate", {
            dateFormat: "d/m/Y",
            allowInput: true,
            locale: "he"
        });

        function calculateDays() {
            const startDateValue = document.getElementById('startDate').value;
            const endDateValue = document.getElementById('endDate').value;

            // Validate input format using regex
            const datePattern = /^\d{1,2}\/\d{1,2}\/\d{4}$/;

            if (!datePattern.test(startDateValue) || !datePattern.test(endDateValue)) {
                document.getElementById('result').innerText = 'יש להזין תאריך לפי הפורמט dd/mm/yyyy';
                return;
            }

            // Convert dates from dd/mm/yyyy to a Date object
            const [startDay, startMonth, startYear] = startDateValue.split('/');
            const [endDay, endMonth, endYear] = endDateValue.split('/');
            const startDate = new Date(startYear, startMonth - 1, startDay);
            const endDate = new Date(endYear, endMonth - 1, endDay);

            if (isNaN(startDate) || isNaN(endDate)) {
                document.getElementById('result').innerText = 'תאריך לא חוקי. יש לנסות שוב.';
                return;
            }

            const timeDifference = endDate - startDate;
            const dayDifference = Math.floor(timeDifference / (1000 * 3600 * 24));

            if (dayDifference < 0) {
                document.getElementById('result').innerText = 'תאריך הסיום חייב להיות אחרי תאריך ההתחלה.';
            } else {
                document.getElementById('result').innerText = `ימי התרעננות: ${dayDifference}`;
            }
        }
    </script>
</body>

</html>